////  Environment//  Created by Ketan Anjaria on 2007-03-09.//  Copyright (c) 2007 __MyCompanyName__. All rights reserved.//package com.kidbombay.util {	import flash.display.*		import flash.text.*;	import flash.events.*;	import flash.net.*;		import flash.external.*;	import flash.system.*;		public class Environment extends EventDispatcher {				static private var $instance:Environment;				static private var $vars:Object;		/**		 * Creates a new Environment component instance.		 * com.kidbombay.util.Environment		 */				public function Environment( caller : Function = null ) {	            if( caller != Environment.getInstance )                throw new Error ("Environment is a Singleton class, use getInstance() instead");            if ( Environment.$instance != null )                throw new Error( "Only one Environment instance should be instantiated" );			$vars = {};		}		static public function getInstance() : Environment {			if ( $instance == null ) {				$instance = new Environment( arguments.callee );			}			return $instance;		}				static public function setValue(p_key:String, p_val:*) {/*			ExternalInterface.call("alert",("   setValue = " + p_key));			ExternalInterface.call("alert",("   p_val = " + p_val));*/			getInstance();			$vars[p_key] = p_val;		}				static public function getValue(p_key:String):*{			getInstance();			return $vars[p_key] != null ? $vars[p_key] : null		}		static public function getFlashVars(root:DisplayObject):void{			var flashVars:Object = (root.loaderInfo as LoaderInfo).parameters;			for (var i:String in flashVars) {				setValue(i, flashVars[i]);			}		}		static public function isInBrowser():Boolean{			if(Capabilities.playerType == "PlugIn" || Capabilities.playerType == "ActiveX") return true;			return false;		}		static public function toString() {			for (var i:String in $vars) {				trace("Environment." + i  + " = "+ $vars[i]);			}		}	}}